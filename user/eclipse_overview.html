<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Massif User Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Massif User Guide</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Massif is MATLAB Simulink Integration Framework for Eclipse.
Its purpose is to convert Simulink models to Eclipse-EMF models, and vice versa.
This guide introduces the main features of the software for end-users.
It also contains illustrative screenshots in order to ease the learning process and to show configuration settings.</p>
</div>
<div class="sect3">
<h4 id="_installation_matlab_connectors">Installation, MATLAB connectors</h4>
<div class="paragraph">
<p>To install Massif follow the steps described in the <a href="install_guide.html">install guide</a>.</p>
</div>
<div class="paragraph">
<p>If Massif is installed you have to build connection between Massif and MATLAB.
The options to do this are described in <a href="matlab_connectors.html">this page</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_model_importing_and_exporting">Model importing and exporting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In terms of Massif we speak about <em>model import</em>, when a Simulink model is converted into an EMF representation.
In case of a reverse process we speak about <em>model export</em>.
The following subsections highlight the importing and exporting capabilities of Massif.</p>
</div>
<div class="sect2">
<h3 id="_model_import">Model import</h3>
<div class="paragraph">
<p>In Massif we defined a specific EMF metamodel for describing the Simulink modeling capabilities.
This Ecore representation was defined to capture the super structure of the MATLAB modeling language and thus provides
a general representation for any MATLAB systems and library.
The <em>importer module</em> is responsible to create the EMF instance model based on a single traversal on the original MATLAB
representation.</p>
</div>
<div class="paragraph">
<p>How this traversal is configured is defined in the model import preferences in
<em>Window/Preferences/Simulink Preferences/Model Import Preferences</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/model_import_preferences.png" alt="Model Import Preferences">
</div>
</div>
<div class="paragraph">
<p>The available options are the followings:</p>
</div>
<div id="traverse_mode" class="ulist">
<ul>
<li>
<p><strong>Traverse mode</strong>:
In Simulink there are some modeling possibilities, which make the import process complex,
and can lead to unexpectedly long import times, so that these cases require extra attention.
One of these is the handling of blocks called model reference blocks.
These can be used to embed an individual Simulink model to another model as though it was a single SubSystem.
The first three options provide different import techniques for such special model elements:</p>
<div class="ulist">
<ul>
<li>
<p>The <em>Shallow</em> mode means that when a model reference block is found,
a model reference block is placed in the created EMF model, but the referenced model is not processed.</p>
</li>
<li>
<p>The <em>Deep</em> mode means that for each model reference block a new EMF model is created for the referenced model.
Those models are saved under the same directory using the name of the referenced Simulink model.</p>
</li>
<li>
<p>The <em>Flattening</em> mode imports model reference blocks as though they were subsystems.
This means, that the model reference is imported as a subsystem block,
and the referenced model components are placed (copied) into the SubSystem.</p>
</li>
<li>
<p>In case of very large models we provide a fourth option that can significantly reduce the import time.
The <em>Referencing</em> mode provides the following:
during the import all libraries are imported only once (the first they are traversed) and whenever there is a block
that has a library reference to an already imported library only a referencing subsytem
is created pointing to the corresponding library.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Default result model location</strong>:
This field allows the user to select a default destination path for the imported models.</p>
</li>
<li>
<p><strong>Import filters to use by default</strong>:
For further import customization there is a filtering mechanism provided by Massif in addition to the previously introduced
import modes.
The basic idea was to decide whether the internal part of a certain SubSystem should be represented in the imported EMF model
or not.
This feature is usually based a specific <em>block parameter</em> of the SubSystems.
The folllowing filters are implemented:</p>
<div class="ulist">
<ul>
<li>
<p><em>Block import filters</em> are working on block level:</p>
<div class="ulist">
<ul>
<li>
<p><em>Library filter</em>: This filter allows to skip traversal of atomic library blocks inside a library model.
Such blocks are not represented graphically by the tree view of the Simulink Library Browser in Matlab.</p>
</li>
<li>
<p><em>FAM filter</em>: This filters all internal blocks of subsystems with <code>Tag</code> parameter value of <code>FAM_Leaf</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Parameter import filters</em> are working on parameters inside of blocks:</p>
<div class="ulist">
<ul>
<li>
<p><em>Ignore all parameters filter</em>: This filter makes the importer skip all block parameters.</p>
</li>
<li>
<p><em>Read-only parameter filter</em>: This filter makes the importer skip parameters that are read only.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Additional MATLAB Path</strong>:
Folder paths given here are added to MATLAB path prior to model import.
This setting allows the user to ensure that everything is available for Simulink to properly load the models
and access their dependencies.</p>
</li>
<li>
<p><strong>Startup script names</strong>:
the scripts set here are executed prior to model import.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To import a model, open the context menu of an <code>.mdl</code> or <code>.slx</code> file in the package explorer within Eclipse
(right click on the file).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/import_simulink_model.png" alt="Import Simulink Model">
</div>
</div>
<div class="paragraph">
<p>If no default path is set in preferences a popup window will appear automatically to set the required parameters.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/import_parameters.png" alt="Import Parameters">
</div>
</div>
<div class="paragraph">
<p>After the model is imported, a manual refresh might be needed on the destination folder to see the EMF model
in the Eclipse package explorer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_model_export">Model export</h3>
<div class="paragraph">
<p>The EMF representation stores all information to build up the Simulink model using only command line model manipulation commands.
This process is more simple compared to importing,
thus there are only basic parameters for configuring this feature on the export preferences page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/model_export_preferences.png" alt="Model Export Preferences">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Default result model location</strong>:
This field allows the user to select a default destination path for the exported models.</p>
</li>
<li>
<p><strong>Simulink model file extension</strong>:
Type of the output simulink models can be <code>MDL</code> or <code>SLX</code>.</p>
</li>
<li>
<p><strong>Additional MATLAB Path</strong>:
Folder paths given here are added to MATLAB path prior to model export.</p>
</li>
<li>
<p><strong>Startup Script names</strong>:
The scripts set here are run prior to model export.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To start an export, open the context menu of a <code>.simulink</code> file in the package explorer (right click on the file).
The export menu entry is shown in the picture below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/export_simulink_model.png" alt="Export Simulink Model">
</div>
</div>
<div class="paragraph">
<p>If no default export path was set previously on the preferences page, a popup window will appear and the path can be selected.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/export_parameters.png" alt="Export Parameters">
</div>
</div>
<div class="paragraph">
<p>Please note that no model with the same name as the exported model should be available on the MATLAB path at the time of export.
This case MATLAB would open that model and edit that, instead of creating a new one.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>